spring.application.name=demo

# WebFlux Configuration
spring.webflux.static-path-pattern=/**
spring.main.web-application-type=reactive

# RabbitMQ Configuration
spring.rabbitmq.host=192.168.50.93
spring.rabbitmq.port=5672
spring.rabbitmq.username=rabbitmq
spring.rabbitmq.password=password
spring.rabbitmq.connection-timeout=5000

# Spring Cloud Stream Configuration
spring.cloud.stream.bindings.retrieveAircraftPositions-in-0.destination=aircraftpositions
spring.cloud.stream.bindings.retrieveAircraftPositions-in-0.group=aircraftpositions-new
spring.cloud.stream.bindings.retrieveAircraftPositions-in-0.binder=rabbit
spring.cloud.stream.bindings.retrieveAircraftPositions-in-0.consumer.max-attempts=1

# Rabbit-specific settings to avoid queue conflicts
spring.cloud.stream.rabbit.bindings.retrieveAircraftPositions-in-0.consumer.auto-bind-dlq=false
spring.cloud.stream.rabbit.bindings.retrieveAircraftPositions-in-0.consumer.republish-to-dlq=false
spring.cloud.stream.rabbit.bindings.retrieveAircraftPositions-in-0.consumer.auto-delete=true
spring.cloud.stream.rabbit.bindings.retrieveAircraftPositions-in-0.consumer.durable=false
spring.cloud.stream.rabbit.bindings.retrieveAircraftPositions-in-0.consumer.dead-letter-exchange=
spring.cloud.stream.rabbit.bindings.retrieveAircraftPositions-in-0.consumer.dead-letter-routing-key=

# Function definition
spring.cloud.function.definition=retrieveAircraftPositions

# R2DBC Configuration
spring.r2dbc.url=r2dbc:h2:mem:///planefinder?options=DB_CLOSE_DELAY=-1
spring.r2dbc.username=sa
spring.r2dbc.password=

spring.r2dbc.pool.enabled=true
spring.r2dbc.pool.initial-size=2
spring.r2dbc.pool.max-size=10

spring.r2dbc.initialization-mode=always
# H2 Console
spring.h2.console.enabled=true
spring.h2.console.path=/h2-console

# Auto-create schema
spring.sql.init.mode=always
spring.sql.init.schema-locations=classpath:schema.sql

# Enable debug logging
logging.level.org.springframework.cloud.stream=DEBUG
logging.level.org.springframework.amqp=DEBUG
logging.level.com.example.demo=DEBUG
logging.level.reactor.core=INFO
logging.level.io.r2dbc=INFO