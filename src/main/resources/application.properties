spring.application.name=demo

# WebFlux Configuration
spring.webflux.static-path-pattern=/**
spring.main.web-application-type=reactive

# RabbitMQ Configuration
spring.rabbitmq.host=192.168.50.93
spring.rabbitmq.port=5672
spring.rabbitmq.username=rabbitmq
spring.rabbitmq.password=password
spring.rabbitmq.connection-timeout=5000

# Spring Cloud Stream Configuration
spring.cloud.stream.bindings.retrieveAircraftPositions-in-0.destination=aircraftpositions
spring.cloud.stream.bindings.retrieveAircraftPositions-in-0.group=demo-group
spring.cloud.stream.bindings.retrieveAircraftPositions-in-0.binder=rabbit
spring.cloud.stream.bindings.retrieveAircraftPositions-in-0.consumer.max-attempts=1

# Rabbit-specific settings - ??????????: ???????? ??????? durable ??? ????????????
spring.cloud.stream.rabbit.bindings.retrieveAircraftPositions-in-0.consumer.auto-bind-dlq=true
spring.cloud.stream.rabbit.bindings.retrieveAircraftPositions-in-0.consumer.republish-to-dlq=false
spring.cloud.stream.rabbit.bindings.retrieveAircraftPositions-in-0.consumer.auto-delete=false
spring.cloud.stream.rabbit.bindings.retrieveAircraftPositions-in-0.consumer.durable=true
spring.cloud.stream.rabbit.bindings.retrieveAircraftPositions-in-0.consumer.dead-letter-exchange=
spring.cloud.stream.rabbit.bindings.retrieveAircraftPositions-in-0.consumer.dead-letter-routing-key=



# Backpressure and batching settings - ?????????
spring.cloud.stream.rabbit.bindings.retrieveAircraftPositions-in-0.consumer.prefetch=1
spring.cloud.stream.rabbit.bindings.retrieveAircraftPositions-in-0.consumer.batch-size=10
spring.cloud.stream.rabbit.bindings.retrieveAircraftPositions-in-0.consumer.requeue-rejected=false

# Function definition
spring.cloud.function.definition=retrieveAircraftPositions

# R2DBC Configuration
spring.r2dbc.url=r2dbc:h2:mem:///planefinder?options=DB_CLOSE_DELAY=-1
spring.r2dbc.username=sa
spring.r2dbc.password=

spring.r2dbc.pool.enabled=true
spring.r2dbc.pool.initial-size=2
spring.r2dbc.pool.max-size=10

spring.r2dbc.initialization-mode=always

# H2 Console
spring.h2.console.enabled=true
spring.h2.console.path=/h2-console

# Auto-create schema
spring.sql.init.mode=always
spring.sql.init.schema-locations=classpath:schema.sql

# Logging configuration - ??????????????
logging.level.org.springframework.cloud.stream=INFO
logging.level.org.springframework.amqp=INFO
logging.level.com.example.demo=DEBUG
logging.level.reactor.core=WARN
logging.level.io.r2dbc=INFO
logging.level.org.springframework.data.r2dbc=INFO

# ?????????: ????????? ??? ????????? ?????? ? ??????????????????
spring.cloud.stream.default.consumer.auto-startup=true
spring.cloud.stream.default.consumer.concurrency=1

# ????????? ??? Reactive RabbitMQ
spring.rabbitmq.listener.simple.retry.enabled=false